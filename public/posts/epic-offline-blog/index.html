<!doctype html><html data-theme=dark lang=en><head><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-139935010-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="LukeWood.dev&#32;is&#32;my&#32;personal&#32;website.&#32;&#32;It&#32;serves&#32;as&#32;a&#32;tech&#32;blog,&#32;code&#32;showcase,&#32;and&#32;project&#32;portfolio."><title>Luke Wood</title><meta property="og:title" content="Generating an Epic Offline Blog With Hugo"><meta property="og:description" content="Background I recently published the theme I developed for this blog as an open source project. The theme can be viewed at LINK.
As a long time web developer I wanted to over engineer my blog setup and make my theme use cutting edge web technology on all fronts. Night mode, progressive image loading, lazy image loading, and offline browsing were all must haves for the new blog setup."><meta property="og:type" content="article"><meta property="og:url" content="/posts/epic-offline-blog/"><meta property="article:published_time" content="2019-07-11T20:13:20-07:00"><meta property="article:modified_time" content="2019-07-11T20:13:20-07:00"><meta itemprop=name content="Generating an Epic Offline Blog With Hugo"><meta itemprop=description content="Background I recently published the theme I developed for this blog as an open source project. The theme can be viewed at LINK.
As a long time web developer I wanted to over engineer my blog setup and make my theme use cutting edge web technology on all fronts. Night mode, progressive image loading, lazy image loading, and offline browsing were all must haves for the new blog setup."><meta itemprop=datePublished content="2019-07-11T20:13:20-07:00"><meta itemprop=dateModified content="2019-07-11T20:13:20-07:00"><meta itemprop=wordCount content="280"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Generating an Epic Offline Blog With Hugo"><meta name=twitter:description content="Background I recently published the theme I developed for this blog as an open source project. The theme can be viewed at LINK.
As a long time web developer I wanted to over engineer my blog setup and make my theme use cutting edge web technology on all fronts. Night mode, progressive image loading, lazy image loading, and offline browsing were all must haves for the new blog setup."><link rel=apple-touch-icon sizes=32x32 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_32x32_resize_box_2.png><link rel=icon type=image/png sizes=32x32 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_32x32_resize_box_2.png><link rel=apple-touch-icon sizes=96x96 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_96x96_resize_box_2.png><link rel=icon type=image/png sizes=96x96 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_96x96_resize_box_2.png><link rel=apple-touch-icon sizes=57x57 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_57x57_resize_box_2.png><link rel=icon type=image/png sizes=57x57 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_57x57_resize_box_2.png><link rel=apple-touch-icon sizes=60x60 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_60x60_resize_box_2.png><link rel=icon type=image/png sizes=60x60 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_60x60_resize_box_2.png><link rel=apple-touch-icon sizes=72x72 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_72x72_resize_box_2.png><link rel=icon type=image/png sizes=72x72 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_72x72_resize_box_2.png><link rel=apple-touch-icon sizes=76x76 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_76x76_resize_box_2.png><link rel=icon type=image/png sizes=76x76 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_76x76_resize_box_2.png><link rel=apple-touch-icon sizes=114x114 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_114x114_resize_box_2.png><link rel=icon type=image/png sizes=114x114 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_114x114_resize_box_2.png><link rel=apple-touch-icon sizes=120x120 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_120x120_resize_box_2.png><link rel=icon type=image/png sizes=120x120 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_120x120_resize_box_2.png><link rel=apple-touch-icon sizes=128x128 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_128x128_resize_box_2.png><link rel=icon type=image/png sizes=128x128 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_128x128_resize_box_2.png><link rel=apple-touch-icon sizes=144x144 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_144x144_resize_box_2.png><link rel=icon type=image/png sizes=144x144 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_144x144_resize_box_2.png><link rel=apple-touch-icon sizes=152x152 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_152x152_resize_box_2.png><link rel=icon type=image/png sizes=152x152 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_152x152_resize_box_2.png><link rel=apple-touch-icon sizes=180x180 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_180x180_resize_box_2.png><link rel=icon type=image/png sizes=180x180 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_180x180_resize_box_2.png><link rel=apple-touch-icon sizes=192x192 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_192x192_resize_box_2.png><link rel=icon type=image/png sizes=192x192 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_192x192_resize_box_2.png><link rel=apple-touch-icon sizes=512x512 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_512x512_resize_box_2.png><link rel=icon type=image/png sizes=512x512 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_512x512_resize_box_2.png><meta name=theme-color content="#121212"><meta name=msapplication-TileColor content="#121212"><link rel=manifest href=/manifest.json><script async defer>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register("\/sw.js").then(function(registration){console.log('ServiceWorker registration successful with scope: ',registration.scope);}).catch(function(err){console.log('ServiceWorker registration failed: ',err);});});}</script><link rel=stylesheet type=text/css href=/base.5b82c55bd8d1b89dcbda8e4539048d7d577d0641c4286c1e6430276a519cfc8b.css><link rel=stylesheet type=text/css href=/post.424ef5937c5d88d1be1e8de01d3b9e24181fe37fa29921cbf1e3a5f5efcec93a.css></head><body class=preload><nav class=menu><a class="main-emphasis weight-700" href=/>LukeWood.dev</a>
<script defer async src=/js/menu.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js></script></nav><main class=container><article class=content><h1>Generating an Epic Offline Blog With Hugo</h1><h1 id=background>Background</h1><p>I recently published the theme I developed for this blog as an open source project.
The theme can be viewed at <em>LINK</em>.</p><p>As a long time web developer I wanted to over engineer my blog setup and make my theme use cutting edge web technology on all fronts.
Night mode, progressive image loading, lazy image loading, and offline browsing were all must haves for the new blog setup.</p><p>Of all of these features the most difficult to get right was the offline browsing.
This post covers how the pages for my blog are cached and how all of the supporting assets are generated.</p><h1 id=shipping-as-a-pwa>Shipping as a PWA</h1><p>This section is for those unfamiliar with how a website could function offline in the first place.</p><p>&hellip; background &hellip;
PWA</p><h1 id=the-service-worker>The Service Worker</h1><h1 id=route-cache-manifest-json>$ROUTE/cache_manifest.json</h1><p>I decided that I wanted to generate a cache manifest for each route.
As users visit pages some assets will automatically be cached, and others will be cacheable on an opt in basis.</p><p>This will all be controlled bt a cache_manifest.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
  <span style=color:#960050;background-color:#1e0010>precache:</span> <span style=color:#960050;background-color:#1e0010>[],</span>
  <span style=color:#960050;background-color:#1e0010>permanent_statics:</span> <span style=color:#960050;background-color:#1e0010>[],</span>
  <span style=color:#960050;background-color:#1e0010>offline:</span> <span style=color:#960050;background-color:#1e0010>[]</span>
}</code></pre></td></tr></table></div></div><h1 id=multiple-hugo-outputs>Multiple Hugo Outputs</h1><p>By default hugo outputs html for each webpage used.</p><p>During the generation of each page I stash information about all of the assets used.</p><p>I can do this because I control the entire template stack - this was a huge win in using my own theme.</p><h1 id=opt-in-installs>Opt in installs</h1><h1 id=tying-it-all-together>Tying it all together</h1><p>All that was left to do was ship the service worker on each page and give it a shot</p><h1 id=conclusions>Conclusions</h1><p>Really happy with the results.</p><p>Check out my hugo theme here:</p><p>The docuentation can be found here.</p><link href=//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css rel=stylesheet type=text/css><link rel=stylesheet type=text/css href=/mailchimp.d4cb3edccbd453d6c8169d3f6400ccbb8e92afb08e944d4523062ee2f5a08294.css><div id=mc_embed_signup><form action=https://gmail.us3.list-manage.com/subscribe/post?u&#61;690be7ba6bb2da04ebb3cb084&amp;amp;id&#61;30d3ffcf46 method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div id=mc_embed_signup_scroll><label for=mce-EMAIL>Subscribe to my mailing list!</label><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_690be7ba6bb2da04ebb3cb084_30d3ffcf46 tabindex=-1></div><div class=clear><input type=email name=EMAIL class=email id=mce-EMAIL placeholder="email address" required>
<input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div></div></form></div></article></main><a id=night-toggle class=material-icon>wb_sunny</a>
<script defer async src=/js/darkmode.min.70558baa1fafac62b51812771613d1bf10c6d9eefaaaef70c85dd2910001bd42.js></script><script defer async src=/js/preload.min.63d20478881c7ac6a2bd1867d8d7ea40d73de863b0a9e88784c255e981ad55ea.js></script><script defer async src=/js/lozad.min.19125d78bc7e94940f6397b22cf080e177150edcc60909d6751878413be66cdf.js></script><script defer async src=/js/cache.min.aef5955b4cfc1e09afa31f2596700acb749ed325f2c48c878bdcff11347343d9.js></script></body></html>
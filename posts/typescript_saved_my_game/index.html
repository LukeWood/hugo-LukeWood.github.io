<!doctype html><html data-theme=dark lang=en><head><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-139935010-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="LukeWood.dev is my personal website.  It serves as a tech blog, code showcase, and project portfolio."><title>Luke Wood</title><meta property="og:title" content="Typescript Saved My Game's Performance"><meta property="og:description" content="Background For quite awhile bulletz.io was written in vanilla javascript. The only libraries I used were RxJs and Phoenix Websockets. Performance was top notch for quite awhile due to the lack of framework, highly customized rendering code, and a specialized engine. I regularly got complements on the performance and smoothness of rendering.
  A screenshot of bulletz.io   October 2019 Several comments came in via email, forums, and text message from friends commenting on the poor rendering performance of my game bulletz."><meta property="og:type" content="article"><meta property="og:url" content="/posts/typescript_saved_my_game/"><meta property="article:published_time" content="2020-02-23T00:00:00+00:00"><meta property="article:modified_time" content="2020-02-23T00:00:00+00:00"><meta itemprop=name content="Typescript Saved My Game's Performance"><meta itemprop=description content="Background For quite awhile bulletz.io was written in vanilla javascript. The only libraries I used were RxJs and Phoenix Websockets. Performance was top notch for quite awhile due to the lack of framework, highly customized rendering code, and a specialized engine. I regularly got complements on the performance and smoothness of rendering.
  A screenshot of bulletz.io   October 2019 Several comments came in via email, forums, and text message from friends commenting on the poor rendering performance of my game bulletz."><meta itemprop=datePublished content="2020-02-23T00:00:00+00:00"><meta itemprop=dateModified content="2020-02-23T00:00:00+00:00"><meta itemprop=wordCount content="321"><meta itemprop=keywords content="webdev,typescript,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Typescript Saved My Game's Performance"><meta name=twitter:description content="Background For quite awhile bulletz.io was written in vanilla javascript. The only libraries I used were RxJs and Phoenix Websockets. Performance was top notch for quite awhile due to the lack of framework, highly customized rendering code, and a specialized engine. I regularly got complements on the performance and smoothness of rendering.
  A screenshot of bulletz.io   October 2019 Several comments came in via email, forums, and text message from friends commenting on the poor rendering performance of my game bulletz."><link rel=apple-touch-icon sizes=32x32 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_32x32_resize_box_2.png><link rel=icon type=image/png sizes=32x32 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_32x32_resize_box_2.png><link rel=apple-touch-icon sizes=96x96 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_96x96_resize_box_2.png><link rel=icon type=image/png sizes=96x96 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_96x96_resize_box_2.png><link rel=apple-touch-icon sizes=57x57 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_57x57_resize_box_2.png><link rel=icon type=image/png sizes=57x57 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_57x57_resize_box_2.png><link rel=apple-touch-icon sizes=60x60 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_60x60_resize_box_2.png><link rel=icon type=image/png sizes=60x60 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_60x60_resize_box_2.png><link rel=apple-touch-icon sizes=72x72 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_72x72_resize_box_2.png><link rel=icon type=image/png sizes=72x72 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_72x72_resize_box_2.png><link rel=apple-touch-icon sizes=76x76 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_76x76_resize_box_2.png><link rel=icon type=image/png sizes=76x76 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_76x76_resize_box_2.png><link rel=apple-touch-icon sizes=114x114 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_114x114_resize_box_2.png><link rel=icon type=image/png sizes=114x114 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_114x114_resize_box_2.png><link rel=apple-touch-icon sizes=120x120 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_120x120_resize_box_2.png><link rel=icon type=image/png sizes=120x120 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_120x120_resize_box_2.png><link rel=apple-touch-icon sizes=128x128 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_128x128_resize_box_2.png><link rel=icon type=image/png sizes=128x128 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_128x128_resize_box_2.png><link rel=apple-touch-icon sizes=144x144 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_144x144_resize_box_2.png><link rel=icon type=image/png sizes=144x144 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_144x144_resize_box_2.png><link rel=apple-touch-icon sizes=152x152 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_152x152_resize_box_2.png><link rel=icon type=image/png sizes=152x152 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_152x152_resize_box_2.png><link rel=apple-touch-icon sizes=180x180 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_180x180_resize_box_2.png><link rel=icon type=image/png sizes=180x180 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_180x180_resize_box_2.png><link rel=apple-touch-icon sizes=192x192 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_192x192_resize_box_2.png><link rel=icon type=image/png sizes=192x192 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_192x192_resize_box_2.png><link rel=apple-touch-icon sizes=512x512 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_512x512_resize_box_2.png><link rel=icon type=image/png sizes=512x512 href=/icons/whale_hu4b96c97647f96e31a06c1982535090f9_26376_512x512_resize_box_2.png><meta name=theme-color content="#121212"><meta name=msapplication-TileColor content="#121212"><link rel=manifest href=/manifest.json><script async defer>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register("\/sw.js").then(function(registration){console.log('ServiceWorker registration successful with scope: ',registration.scope);}).catch(function(err){console.log('ServiceWorker registration failed: ',err);});});}</script><link rel=stylesheet type=text/css href=/base.de1c3f51219371053ba76f4269fdbc4adb050d34cc9a39f17fe4e8c7b0b452e3.css><link rel=stylesheet type=text/css href=/post.32d5436648f5b7453ca414ada5d40d891abf67957299445eccba8eb30975482c.css><script defer async src=/js/darkmode.min.7d7341c61e13b0b7660636875a1d5ecb3f169ae545fc46104e82ec5302464530.js></script></head><body class=preload><nav class=menu><a class="main-emphasis weight-700" href=/>LukeWood.dev</a>
<a id=night-toggle class="night-menu material-icon">wb_sunny</a>
<script defer async src=/js/menu.min.7c54a13473e137bac23f569d72158e4b11f220c39f5ede70ed53872204eb24b2.js></script></nav><main class=container><article class=content><h1>Typescript Saved My Game's Performance</h1><h2 id=background>Background</h2><p>For quite awhile <a href=https://bulletz.io>bulletz.io</a> was written in vanilla javascript.
The only libraries I used were RxJs and Phoenix Websockets.
Performance was top notch for quite awhile due to the lack of framework, highly customized rendering code, and a specialized engine.
I regularly got complements on the performance and smoothness of rendering.</p><center><figure class="progressive_figure bordered-figure" data-imgset="/img/posts/bulletz/bulletz_hu6d477cec086f2302e9505c893621d31a_357145_640x0_resize_box_2.png 320w,
    /img/posts/bulletz/bulletz_hu6d477cec086f2302e9505c893621d31a_357145_1024x0_resize_box_2.png 600w,
    /img/posts/bulletz/bulletz_hu6d477cec086f2302e9505c893621d31a_357145_1600x0_resize_box_2.png 2x" data-src=/img/posts/bulletz/bulletz_hu6d477cec086f2302e9505c893621d31a_357145_1600x0_resize_box_2.png><div class=placeholder><img class=img-small src=/img/posts/bulletz/bulletz_hu6d477cec086f2302e9505c893621d31a_357145_48x0_resize_q20_box_2.png alt></div><figcaption>A screenshot of bulletz.io</figcaption></figure></center><h2 id=october-2019>October 2019</h2><p>Several comments came in via email, forums, and text message from friends commenting on the poor rendering performance of my game <a href=https://bulletz.io>bulletz.io</a>.
The only changes I had made (from my perspective) were trivial and had nothing to do with rendering.
I&rsquo;d pretty much completely halted development at this point.</p><h2 id=what-happened>What happened?</h2><p>My laptop broke last October.
Due to this I got a spankin new Macbook.
I re-installed all of my dependencies. Due to some bad development practices on my part (hobby project give me a break) I bumped the version of RxJs.</p><center><figure class="progressive_figure bordered-figure" data-imgset="/img/posts/typescript/macbook-pro_hu51d315bcb63b0f94a1095e6d4a5446a9_411665_640x0_resize_q75_box.jpg 320w,
    /img/posts/typescript/macbook-pro_hu51d315bcb63b0f94a1095e6d4a5446a9_411665_1024x0_resize_q75_box.jpg 600w,
    /img/posts/typescript/macbook-pro_hu51d315bcb63b0f94a1095e6d4a5446a9_411665_1600x0_resize_q75_box.jpg 2x" data-src=/img/posts/typescript/macbook-pro_hu51d315bcb63b0f94a1095e6d4a5446a9_411665_1600x0_resize_q75_box.jpg><div class=placeholder><img class=img-small src=/img/posts/typescript/macbook-pro_hu51d315bcb63b0f94a1095e6d4a5446a9_411665_48x0_resize_q20_box.jpg alt></div><figcaption>My spankin new 2020 Macbook Pro</figcaption></figure></center><p>Why was this problematic?
well&mldr;</p><blockquote><h1 id=rxjs-changelog>RxJs ChangeLog</h1><h2 id=600-alpha1-2018-01-12>6.0.0-alpha.1 (2018-01-12)</h2><h3 id=breaking-changes>BREAKING CHANGES</h3><p>&mldr;</p><p><em><strong>schedulers: Scheduler instances have changed names to be suffixed with Scheduler, (e.g. asap -> asapScheduler)</strong></em></p><p>&mldr;</p></blockquote><p>The <a href=https://rxjs.dev/api/index/const/animationFrameScheduler>animationFrameScheduler</a> was moved and I didn&rsquo;t notice.
This was how I was controlling my rendering time.
I was basically rendering all the time eating users&rsquo; CPU cycles.</p><h2 id=late-2019>Late 2019</h2><p>For fun I refactored <a href=https://bulletz.io>bulletz.io</a> to be written in Typescript.</p><p>To my surprise, typescript threw an exception indicating that <code>rxjs</code> exported no field named <code>animationFrameScheduler</code> from the location I waws importing it.</p><p>At this point - I wasn&rsquo;t even using typescript features yet. I had <em>ONLY</em> switched to the Typescript compiler and had set it up to check all of my javascript files.</p><p>I found countless other type errors littered throughout my garbage code base during my port to poorly written typescript.</p><h2 id=conclusion>Conclusion</h2><p>I switched to using the real <a href=https://rxjs.dev/api/index/const/animationFrameScheduler>animationFrameScheduler</a> and my games performance went back to how it used to be.</p><p>Typescript saved the game&rsquo;s performance.</p><link href=//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css rel=stylesheet type=text/css><link rel=stylesheet type=text/css href=/mailchimp.e93d894061a381ef524fd458eb0f5d70ef4e2d161bcaa23a6cc913c8572a49eb.css><div id=mc_embed_signup><form action="https://gmail.us3.list-manage.com/subscribe/post?u=690be7ba6bb2da04ebb3cb084&amp;amp;id=30d3ffcf46" method=post id=mc-embedded-subscribe-form name=mc-embedded-subscribe-form class=validate target=_blank novalidate><div id=mc_embed_signup_scroll><label for=mce-EMAIL>Subscribe to my mailing list!</label><div style=position:absolute;left:-5000px aria-hidden=true><input type=text name=b_690be7ba6bb2da04ebb3cb084_30d3ffcf46 tabindex=-1></div><div class=clear><input type=email name=EMAIL class=email id=mce-EMAIL placeholder="email address" required>
<input type=submit value=Subscribe name=subscribe id=mc-embedded-subscribe class=button></div></div></form></div></article></main><script defer async src=/js/preload.min.63d20478881c7ac6a2bd1867d8d7ea40d73de863b0a9e88784c255e981ad55ea.js></script><script defer async src=/js/lozad.min.19125d78bc7e94940f6397b22cf080e177150edcc60909d6751878413be66cdf.js></script></body></html>